{% extends './home.html' %}

{% block title %}Editar Profesor{% endblock %}

{% block body %}
<div class="container py-4">
    <h2 class="mb-4">Editar Profesor</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <form method="POST" action="">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <div class="row mb-3">
            <div class="col-md-4">
                <label for="nombre" class="form-label">Nombre</label>
                <input type="text" class="form-control" name="nombre" value="{{ profesor.nombre }}" required>
            </div>
            <div class="col-md-4">
                <label for="a_paterno" class="form-label">Apellido Paterno</label>
                <input type="text" class="form-control" name="a_paterno" value="{{ profesor.a_paterno }}" required>
            </div>
            <div class="col-md-4">
                <label for="a_materno" class="form-label">Apellido Materno</label>
                <input type="text" class="form-control" name="a_materno" value="{{ profesor.a_materno }}" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <label for="genero" class="form-label">Género</label>
                <select name="genero" class="form-select" required>
                    <option value="M" {% if profesor.genero == 'M' %}selected{% endif %}>Masculino</option>
                    <option value="F" {% if profesor.genero == 'F' %}selected{% endif %}>Femenino</option>
                </select>
            </div>
            <div class="col-md-4">
                <label for="id_categoria" class="form-label">Categoría</label>
                <select name="id_categoria" class="form-select" required>
                    {% for c in categorias %}
                    <option value="{{ c.id_categoria }}" {% if c.nombre_categoria == profesor.categoria %}selected{% endif %}>
                        {{ c.nombre_categoria }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-4">
                <label for="id_grado" class="form-label">Grado</label>
                <select name="id_grado" class="form-select" required>
                    {% for g in grados %}
                    <option value="{{ g.id_grado }}" {% if g.nombre_grado == profesor.grado %}selected{% endif %}>
                        {{ g.nombre_grado }}
                    </option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label for="num_trabajador" class="form-label">Número de Trabajador</label>
                <input type="text" class="form-control" name="num_trabajador" value="{{ profesor.num_trabajador }}" required>
            </div>
            <div class="col-md-6">
                <label for="correo" class="form-label">Correo Institucional</label>
                <input type="email" class="form-control" name="correo" value="{{ profesor.correo }}" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label for="rfc" class="form-label">RFC</label>
                <input type="text" class="form-control" name="rfc" value="{{ profesor.rfc }}" required>
            </div>
            <div class="col-md-6">
                <label for="curp" class="form-label">CURP</label>
                <input type="text" class="form-control" name="curp" value="{{ profesor.curp }}" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label for="ingreso_unam" class="form-label">Ingreso UNAM</label>
                <input type="date" class="form-control" name="ingreso_unam" value="{{ profesor.ingreso_unam }}">
            </div>
            <div class="col-md-6">
                <label for="ingreso_carrera" class="form-label">Ingreso Carrera</label>
                <input type="date" class="form-control" name="ingreso_carrera" value="{{ profesor.ingreso_carrera }}">
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <label for="num_cel" class="form-label">Celular</label>
                <input type="text" class="form-control" name="num_cel" value="{{ profesor.num_cel }}">
            </div>
            <div class="col-md-4">
                <label for="num_tel" class="form-label">Teléfono</label>
                <input type="text" class="form-control" name="num_tel" value="{{ profesor.num_tel }}">
            </div>
            <div class="col-md-4">
                <label for="direccion" class="form-label">Dirección</label>
                <input type="text" class="form-control" name="direccion" value="{{ profesor.direccion }}">
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Guardar cambios</button>
        <a href="{{ url_for('profesores') }}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}
